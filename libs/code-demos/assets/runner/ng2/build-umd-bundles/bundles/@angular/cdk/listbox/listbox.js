!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/cdk/a11y"),require("@angular/cdk/keycodes"),require("@angular/cdk/coercion"),require("@angular/cdk/collections"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/cdk/bidi")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/cdk/a11y","@angular/cdk/keycodes","@angular/cdk/coercion","@angular/cdk/collections","rxjs","rxjs/operators","@angular/forms","@angular/cdk/bidi"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ngCdkListbox={},e.ngCore,e.ngCdkA11y,e.ngCdkKeycodes,e.ngCdkCoercion,e.ngCdkCollections,e.rxjs,e.rxjsOperators,e.ngForms,e.ngCdkBidi)}(this,(function(e,t,i,s,n,a,o,l,r,d){"use strict";function c(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var h=c(t);let p=0;class u extends a.SelectionModel{constructor(e=!1,t,i=!0,s){super(!0,t,i,s),this.multiple=e}isMultipleSelection(){return this.multiple}select(...e){return this.multiple?super.select(...e):super.setSelection(...e)}}class g{constructor(){this._generatedId="cdk-option-"+p++,this._disabled=!1,this.element=t.inject(t.ElementRef).nativeElement,this.listbox=t.inject(b),this.destroyed=new o.Subject,this._clicked=new o.Subject}get id(){return this._id||this._generatedId}set id(e){this._id=e}get disabled(){return this.listbox.disabled||this._disabled}set disabled(e){this._disabled=n.coerceBooleanProperty(e)}get enabledTabIndex(){return void 0===this._enabledTabIndex?this.listbox.enabledTabIndex:this._enabledTabIndex}set enabledTabIndex(e){this._enabledTabIndex=e}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}isSelected(){return this.listbox.isSelected(this)}isActive(){return this.listbox.isActive(this)}toggle(){this.listbox.toggle(this)}select(){this.listbox.select(this)}deselect(){this.listbox.deselect(this)}focus(){this.element.focus()}getLabel(){return(this.typeaheadLabel??this.element.textContent?.trim())||""}setActiveStyles(){}setInactiveStyles(){}_handleFocus(){this.listbox.useActiveDescendant&&(this.listbox._setActiveOption(this),this.listbox.focus())}_getTabIndex(){return this.listbox.useActiveDescendant||this.disabled?-1:this.isActive()?this.enabledTabIndex:-1}}g.ɵfac=h.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:g,deps:[],target:h.ɵɵFactoryTarget.Directive}),g.ɵdir=h.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:g,isStandalone:!0,selector:"[cdkOption]",inputs:{id:"id",value:["cdkOption","value"],typeaheadLabel:["cdkOptionTypeaheadLabel","typeaheadLabel"],disabled:["cdkOptionDisabled","disabled"],enabledTabIndex:["tabindex","enabledTabIndex"]},host:{attributes:{role:"option"},listeners:{click:"_clicked.next($event)",focus:"_handleFocus()"},properties:{id:"id","attr.aria-selected":"isSelected()","attr.tabindex":"_getTabIndex()","attr.aria-disabled":"disabled","class.cdk-option-active":"isActive()"},classAttribute:"cdk-option"},exportAs:["cdkOption"],ngImport:h}),h.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:g,decorators:[{type:t.Directive,args:[{selector:"[cdkOption]",standalone:!0,exportAs:"cdkOption",host:{role:"option",class:"cdk-option","[id]":"id","[attr.aria-selected]":"isSelected()","[attr.tabindex]":"_getTabIndex()","[attr.aria-disabled]":"disabled","[class.cdk-option-active]":"isActive()","(click)":"_clicked.next($event)","(focus)":"_handleFocus()"}}]}],propDecorators:{id:[{type:t.Input}],value:[{type:t.Input,args:["cdkOption"]}],typeaheadLabel:[{type:t.Input,args:["cdkOptionTypeaheadLabel"]}],disabled:[{type:t.Input,args:["cdkOptionDisabled"]}],enabledTabIndex:[{type:t.Input,args:["tabindex"]}]}});class b{constructor(){this._generatedId="cdk-listbox-"+p++,this._disabled=!1,this._useActiveDescendant=!1,this._orientation="vertical",this._navigationWrapDisabled=!1,this._navigateDisabledOptions=!1,this.valueChange=new o.Subject,this.selectionModel=new u,this.destroyed=new o.Subject,this.element=t.inject(t.ElementRef).nativeElement,this.changeDetectorRef=t.inject(t.ChangeDetectorRef),this._invalid=!1,this._lastTriggered=null,this._onTouched=()=>{},this._onChange=()=>{},this._optionClicked=o.defer((()=>this.options.changes.pipe(l.startWith(this.options),l.switchMap((e=>o.merge(...e.map((e=>e._clicked.pipe(l.map((t=>({option:e,event:t})))))))))))),this._dir=t.inject(d.Directionality,{optional:!0}),this._skipDisabledPredicate=e=>e.disabled,this._skipNonePredicate=()=>!1,this._hasFocus=!1}get id(){return this._id||this._generatedId}set id(e){this._id=e}get enabledTabIndex(){return void 0===this._enabledTabIndex?0:this._enabledTabIndex}set enabledTabIndex(e){this._enabledTabIndex=e}get value(){return this._invalid?[]:this.selectionModel.selected}set value(e){this._setSelection(e)}get multiple(){return this.selectionModel.multiple}set multiple(e){this.selectionModel.multiple=n.coerceBooleanProperty(e),this.options&&this._updateInternalValue()}get disabled(){return this._disabled}set disabled(e){this._disabled=n.coerceBooleanProperty(e)}get useActiveDescendant(){return this._useActiveDescendant}set useActiveDescendant(e){this._useActiveDescendant=n.coerceBooleanProperty(e)}get orientation(){return this._orientation}set orientation(e){this._orientation="horizontal"===e?"horizontal":"vertical","horizontal"===e?this.listKeyManager?.withHorizontalOrientation(this._dir?.value||"ltr"):this.listKeyManager?.withVerticalOrientation()}get compareWith(){return this.selectionModel.compareWith}set compareWith(e){this.selectionModel.compareWith=e}get navigationWrapDisabled(){return this._navigationWrapDisabled}set navigationWrapDisabled(e){this._navigationWrapDisabled=n.coerceBooleanProperty(e),this.listKeyManager?.withWrap(!this._navigationWrapDisabled)}get navigateDisabledOptions(){return this._navigateDisabledOptions}set navigateDisabledOptions(e){this._navigateDisabledOptions=n.coerceBooleanProperty(e),this.listKeyManager?.skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate)}ngAfterContentInit(){("undefined"==typeof ngDevMode||ngDevMode)&&(this._verifyNoOptionValueCollisions(),this._verifyOptionValues()),this._initKeyManager(),o.merge(this.selectionModel.changed,this.options.changes).pipe(l.startWith(null),l.takeUntil(this.destroyed)).subscribe((()=>this._updateInternalValue())),this._optionClicked.pipe(l.filter((({option:e})=>!e.disabled)),l.takeUntil(this.destroyed)).subscribe((({option:e,event:t})=>this._handleOptionClicked(e,t)))}ngOnDestroy(){this.listKeyManager?.destroy(),this.destroyed.next(),this.destroyed.complete()}toggle(e){this.toggleValue(e.value)}toggleValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.toggle(e)}select(e){this.selectValue(e.value)}selectValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(e)}deselect(e){this.deselectValue(e.value)}deselectValue(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.deselect(e)}setAllSelected(e){e?(this._invalid&&this.selectionModel.clear(!1),this.selectionModel.select(...this.options.map((e=>e.value)))):this.selectionModel.clear()}isSelected(e){return this.isValueSelected(e.value)}isActive(e){return!(this.listKeyManager?.activeItem!==e)}isValueSelected(e){return!this._invalid&&this.selectionModel.isSelected(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}writeValue(e){this._setSelection(e),this._verifyOptionValues()}setDisabledState(e){this.disabled=e}focus(){this.element.focus()}triggerOption(e){if(e&&!e.disabled){this._lastTriggered=e;(this.multiple?this.selectionModel.toggle(e.value):this.selectionModel.select(e.value))&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option:e}))}}triggerRange(e,t,i,s){if(this.disabled||e&&e.disabled)return;this._lastTriggered=e;const n=this.compareWith??Object.is,a=[...this.options].slice(Math.max(0,Math.min(t,i)),Math.min(this.options.length,Math.max(t,i)+1)).filter((e=>!e.disabled)).map((e=>e.value)),o=[...this.value];for(const e of a){const t=o.findIndex((t=>n(t,e)));s&&-1===t?o.push(e):s||-1===t||o.splice(t,1)}this.selectionModel.setSelection(...o)&&(this._onChange(this.value),this.valueChange.next({value:this.value,listbox:this,option:e}))}_setActiveOption(e){this.listKeyManager.setActiveItem(e)}_handleFocus(){this.useActiveDescendant||(this.selectionModel.selected.length>0?this._setNextFocusToSelectedOption():this.listKeyManager.setNextItemActive(),this._focusActiveOption())}_handleKeydown(e){if(this._disabled)return;const{keyCode:t}=e,i=this.listKeyManager.activeItemIndex,n=["ctrlKey","metaKey"];if(this.multiple&&t===s.A&&s.hasModifierKey(e,...n))return this.triggerRange(null,0,this.options.length-1,this.options.length!==this.value.length),void e.preventDefault();if(this.multiple&&(t===s.SPACE||t===s.ENTER)&&s.hasModifierKey(e,"shiftKey"))return this.listKeyManager.activeItem&&null!=this.listKeyManager.activeItemIndex&&this.triggerRange(this.listKeyManager.activeItem,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!this.listKeyManager.activeItem.isSelected()),void e.preventDefault();if(this.multiple&&t===s.HOME&&s.hasModifierKey(e,...n)&&s.hasModifierKey(e,"shiftKey")){const t=this.listKeyManager.activeItem;if(t){const e=this.listKeyManager.activeItemIndex;this.listKeyManager.setFirstItemActive(),this.triggerRange(t,e,this.listKeyManager.activeItemIndex,!t.isSelected())}return void e.preventDefault()}if(this.multiple&&t===s.END&&s.hasModifierKey(e,...n)&&s.hasModifierKey(e,"shiftKey")){const t=this.listKeyManager.activeItem;if(t){const e=this.listKeyManager.activeItemIndex;this.listKeyManager.setLastItemActive(),this.triggerRange(t,e,this.listKeyManager.activeItemIndex,!t.isSelected())}return void e.preventDefault()}if(t===s.SPACE||t===s.ENTER)return this.triggerOption(this.listKeyManager.activeItem),void e.preventDefault();const a=t===s.UP_ARROW||t===s.DOWN_ARROW||t===s.LEFT_ARROW||t===s.RIGHT_ARROW||t===s.HOME||t===s.END;this.listKeyManager.onKeydown(e),a&&e.shiftKey&&i!==this.listKeyManager.activeItemIndex&&this.triggerOption(this.listKeyManager.activeItem)}_handleFocusIn(){this._hasFocus=!0}_handleFocusOut(e){const t=e.relatedTarget;this.element===t||this.element.contains(t)||(this._onTouched(),this._hasFocus=!1,this._setNextFocusToSelectedOption())}_getAriaActiveDescendant(){return this._useActiveDescendant?this.listKeyManager?.activeItem?.id:null}_getTabIndex(){return this.disabled?-1:this.useActiveDescendant||!this.listKeyManager.activeItem?this.enabledTabIndex:-1}_initKeyManager(){this.listKeyManager=new i.ActiveDescendantKeyManager(this.options).withWrap(!this._navigationWrapDisabled).withTypeAhead().withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._navigateDisabledOptions?this._skipNonePredicate:this._skipDisabledPredicate),"vertical"===this.orientation?this.listKeyManager.withVerticalOrientation():this.listKeyManager.withHorizontalOrientation(this._dir?.value||"ltr"),this.selectionModel.selected.length&&Promise.resolve().then((()=>this._setNextFocusToSelectedOption())),this.listKeyManager.change.subscribe((()=>this._focusActiveOption()))}_focusActiveOption(){this.useActiveDescendant||this.listKeyManager.activeItem?.focus(),this.changeDetectorRef.markForCheck()}_setSelection(e){this._invalid&&this.selectionModel.clear(!1),this.selectionModel.setSelection(...this._coerceValue(e)),this._hasFocus||this._setNextFocusToSelectedOption()}_setNextFocusToSelectedOption(){const e=this.options?.find((e=>e.isSelected()));e&&this.listKeyManager.updateActiveItem(e)}_updateInternalValue(){const e=new Map;this.selectionModel.sort(((t,i)=>this._getIndexForValue(e,t)-this._getIndexForValue(e,i)));const t=this.selectionModel.selected;this._invalid=!this.multiple&&t.length>1||!!this._getInvalidOptionValues(t).length,this.changeDetectorRef.markForCheck()}_getIndexForValue(e,t){const i=this.compareWith||Object.is;if(!e.has(t)){let s=-1;for(let e=0;e<this.options.length;e++)if(i(t,this.options.get(e).value)){s=e;break}e.set(t,s)}return e.get(t)}_handleOptionClicked(e,t){t.preventDefault(),this.listKeyManager.setActiveItem(e),t.shiftKey&&this.multiple?this.triggerRange(e,this._getLastTriggeredIndex()??this.listKeyManager.activeItemIndex,this.listKeyManager.activeItemIndex,!e.isSelected()):this.triggerOption(e)}_verifyNoOptionValueCollisions(){this.options.changes.pipe(l.startWith(this.options),l.takeUntil(this.destroyed)).subscribe((()=>{const e=this.compareWith??Object.is;for(let t=0;t<this.options.length;t++){const i=this.options.get(t);let s=null;for(let n=t+1;n<this.options.length;n++){const t=this.options.get(n);if(e(i.value,t.value)){s=t;break}}if(s)return void(this.compareWith?console.warn("Found multiple CdkOption representing the same value under the given compareWith function",{option1:i.element,option2:s.element,compareWith:this.compareWith}):console.warn("Found multiple CdkOption with the same value",{option1:i.element,option2:s.element}))}}))}_verifyOptionValues(){if(this.options&&("undefined"==typeof ngDevMode||ngDevMode)){const e=this.selectionModel.selected,t=this._getInvalidOptionValues(e);if(!this.multiple&&e.length>1)throw Error("Listbox cannot have more than one selected value in multi-selection mode.");if(t.length)throw Error("Listbox has selected values that do not match any of its options.")}}_coerceValue(e){return null==e?[]:n.coerceArray(e)}_getInvalidOptionValues(e){const t=this.compareWith||Object.is,i=(this.options||[]).map((e=>e.value));return e.filter((e=>!i.some((i=>t(e,i)))))}_getLastTriggeredIndex(){const e=this.options.toArray().indexOf(this._lastTriggered);return-1===e?null:e}}b.ɵfac=h.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:b,deps:[],target:h.ɵɵFactoryTarget.Directive}),b.ɵdir=h.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:b,isStandalone:!0,selector:"[cdkListbox]",inputs:{id:"id",enabledTabIndex:["tabindex","enabledTabIndex"],value:["cdkListboxValue","value"],multiple:["cdkListboxMultiple","multiple"],disabled:["cdkListboxDisabled","disabled"],useActiveDescendant:["cdkListboxUseActiveDescendant","useActiveDescendant"],orientation:["cdkListboxOrientation","orientation"],compareWith:["cdkListboxCompareWith","compareWith"],navigationWrapDisabled:["cdkListboxNavigationWrapDisabled","navigationWrapDisabled"],navigateDisabledOptions:["cdkListboxNavigatesDisabledOptions","navigateDisabledOptions"]},outputs:{valueChange:"cdkListboxValueChange"},host:{attributes:{role:"listbox"},listeners:{focus:"_handleFocus()",keydown:"_handleKeydown($event)",focusout:"_handleFocusOut($event)",focusin:"_handleFocusIn()"},properties:{id:"id","attr.tabindex":"_getTabIndex()","attr.aria-disabled":"disabled","attr.aria-multiselectable":"multiple","attr.aria-activedescendant":"_getAriaActiveDescendant()","attr.aria-orientation":"orientation"},classAttribute:"cdk-listbox"},providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((()=>b)),multi:!0}],queries:[{propertyName:"options",predicate:g,descendants:!0}],exportAs:["cdkListbox"],ngImport:h}),h.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:b,decorators:[{type:t.Directive,args:[{selector:"[cdkListbox]",standalone:!0,exportAs:"cdkListbox",host:{role:"listbox",class:"cdk-listbox","[id]":"id","[attr.tabindex]":"_getTabIndex()","[attr.aria-disabled]":"disabled","[attr.aria-multiselectable]":"multiple","[attr.aria-activedescendant]":"_getAriaActiveDescendant()","[attr.aria-orientation]":"orientation","(focus)":"_handleFocus()","(keydown)":"_handleKeydown($event)","(focusout)":"_handleFocusOut($event)","(focusin)":"_handleFocusIn()"},providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((()=>b)),multi:!0}]}]}],propDecorators:{id:[{type:t.Input}],enabledTabIndex:[{type:t.Input,args:["tabindex"]}],value:[{type:t.Input,args:["cdkListboxValue"]}],multiple:[{type:t.Input,args:["cdkListboxMultiple"]}],disabled:[{type:t.Input,args:["cdkListboxDisabled"]}],useActiveDescendant:[{type:t.Input,args:["cdkListboxUseActiveDescendant"]}],orientation:[{type:t.Input,args:["cdkListboxOrientation"]}],compareWith:[{type:t.Input,args:["cdkListboxCompareWith"]}],navigationWrapDisabled:[{type:t.Input,args:["cdkListboxNavigationWrapDisabled"]}],navigateDisabledOptions:[{type:t.Input,args:["cdkListboxNavigatesDisabledOptions"]}],valueChange:[{type:t.Output,args:["cdkListboxValueChange"]}],options:[{type:t.ContentChildren,args:[g,{descendants:!0}]}]}});const v=[b,g];class y{}y.ɵfac=h.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:y,deps:[],target:h.ɵɵFactoryTarget.NgModule}),y.ɵmod=h.ɵɵngDeclareNgModule({minVersion:"14.0.0",version:"15.0.0",ngImport:h,type:y,imports:[b,g],exports:[b,g]}),y.ɵinj=h.ɵɵngDeclareInjector({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:y}),h.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:h,type:y,decorators:[{type:t.NgModule,args:[{imports:[...v],exports:[...v]}]}]}),e.CdkListbox=b,e.CdkListboxModule=y,e.CdkOption=g}));
