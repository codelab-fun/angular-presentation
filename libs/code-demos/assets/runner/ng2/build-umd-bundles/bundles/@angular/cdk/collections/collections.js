!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","rxjs","@angular/core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ngCdkCollections={},e.rxjs,e.ngCore)}(this,(function(e,t,s){"use strict";function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(s){if("default"!==s){var i=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:function(){return e[s]}})}})),t.default=e,Object.freeze(t)}var n=i(s);class r{}function c(){return Error("Cannot pass multiple values into SelectionModel with single-value mode.")}class o{constructor(){this._listeners=[]}notify(e,t){for(let s of this._listeners)s(e,t)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter((t=>e!==t))}}ngOnDestroy(){this._listeners=[]}}o.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:o,deps:[],target:n.ɵɵFactoryTarget.Injectable}),o.ɵprov=n.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:o,providedIn:"root"}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:o,decorators:[{type:s.Injectable,args:[{providedIn:"root"}]}]});const h=new s.InjectionToken("_ViewRepeater");e.ArrayDataSource=class extends r{constructor(e){super(),this._data=e}connect(){return t.isObservable(this._data)?this._data:t.of(this._data)}disconnect(){}},e.DataSource=r,e.SelectionModel=class{constructor(e=!1,s,i=!0,n){this._multiple=e,this._emitChanges=i,this.compareWith=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new t.Subject,s&&s.length&&(e?s.forEach((e=>this._markSelected(e))):this._markSelected(s[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach((e=>this._markSelected(e)));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach((e=>this._unmarkSelected(e)));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,s=new Set(e);e.forEach((e=>this._markSelected(e))),t.filter((e=>!s.has(e))).forEach((e=>this._unmarkSelected(e)));const i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach((e=>this._unmarkSelected(e)))}_verifyValueAssignment(e){if(e.length>1&&!this._multiple&&("undefined"==typeof ngDevMode||ngDevMode))throw c()}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}},e.UniqueSelectionDispatcher=o,e._DisposeViewRepeaterStrategy=class{applyChanges(e,t,s,i,n){e.forEachOperation(((e,i,r)=>{let c,o;if(null==e.previousIndex){const n=s(e,i,r);c=t.createEmbeddedView(n.templateRef,n.context,n.index),o=1}else null==r?(t.remove(i),o=3):(c=t.get(i),t.move(c,r),o=2);n&&n({context:c?.context,operation:o,record:e})}))}detach(){}},e._RecycleViewRepeaterStrategy=class{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(e,t,s,i,n){e.forEachOperation(((e,r,c)=>{let o,h;if(null==e.previousIndex){const n=()=>s(e,r,c);o=this._insertView(n,c,t,i(e)),h=o?1:0}else null==c?(this._detachAndCacheView(r,t),h=3):(o=this._moveView(r,c,t,i(e)),h=2);n&&n({context:o?.context,operation:h,record:e})}))}detach(){for(const e of this._viewCache)e.destroy();this._viewCache=[]}_insertView(e,t,s,i){const n=this._insertViewFromCache(t,s);if(n)return void(n.context.$implicit=i);const r=e();return s.createEmbeddedView(r.templateRef,r.context,r.index)}_detachAndCacheView(e,t){const s=t.detach(e);this._maybeCacheView(s,t)}_moveView(e,t,s,i){const n=s.get(e);return s.move(n,t),n.context.$implicit=i,n}_maybeCacheView(e,t){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(e);else{const s=t.indexOf(e);-1===s?e.destroy():t.remove(s)}}_insertViewFromCache(e,t){const s=this._viewCache.pop();return s&&t.insert(s,e),s||null}},e._VIEW_REPEATER_STRATEGY=h,e.getMultipleValuesInSingleSelectionError=c,e.isDataSource=function(e){return e&&"function"==typeof e.connect&&!(e instanceof t.ConnectableObservable)}}));
