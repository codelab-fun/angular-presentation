!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/collections"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/cdk/coercion"),require("@angular/cdk/bidi")):"function"==typeof define&&define.amd?define(["exports","@angular/cdk/collections","rxjs","rxjs/operators","@angular/core","@angular/cdk/coercion","@angular/cdk/bidi"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ngCdkTree={},e.ngCdkCollections,e.rxjs,e.rxjsOperators,e.ngCore,e.ngCdkCoercion,e.ngCdkBidi)}(this,(function(e,t,r,n,s,i,o){"use strict";function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var d=a(s),c=a(o);class l{constructor(){this.expansionModel=new t.SelectionModel(!0)}toggle(e){this.expansionModel.toggle(this._trackByValue(e))}expand(e){this.expansionModel.select(this._trackByValue(e))}collapse(e){this.expansionModel.deselect(this._trackByValue(e))}isExpanded(e){return this.expansionModel.isSelected(this._trackByValue(e))}toggleDescendants(e){this.expansionModel.isSelected(this._trackByValue(e))?this.collapseDescendants(e):this.expandDescendants(e)}collapseAll(){this.expansionModel.clear()}expandDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.select(...t.map((e=>this._trackByValue(e))))}collapseDescendants(e){let t=[e];t.push(...this.getDescendants(e)),this.expansionModel.deselect(...t.map((e=>this._trackByValue(e))))}_trackByValue(e){return this.trackBy?this.trackBy(e):e}}const h=new s.InjectionToken("CDK_TREE_NODE_OUTLET_NODE");class p{constructor(e,t){this.viewContainer=e,this._node=t}}p.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:p,deps:[{token:d.ViewContainerRef},{token:h,optional:!0}],target:d.ɵɵFactoryTarget.Directive}),p.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:p,selector:"[cdkTreeNodeOutlet]",ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:p,decorators:[{type:s.Directive,args:[{selector:"[cdkTreeNodeOutlet]"}]}],ctorParameters:function(){return[{type:d.ViewContainerRef},{type:void 0,decorators:[{type:s.Inject,args:[h]},{type:s.Optional}]}]}});class u{constructor(e){this.$implicit=e}}class g{constructor(e){this.template=e}}function f(){return Error("A valid data source must be provided.")}function _(){return Error("There can only be one default row without a when predicate function.")}function y(){return Error("Could not find a matching node definition for the provided node data.")}function v(){return Error("Could not find a tree control for the tree.")}function D(){return Error("Could not find functions for nested/flat tree in tree control.")}g.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:g,deps:[{token:d.TemplateRef}],target:d.ɵɵFactoryTarget.Directive}),g.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:g,selector:"[cdkTreeNodeDef]",inputs:{when:["cdkTreeNodeDefWhen","when"]},ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:g,decorators:[{type:s.Directive,args:[{selector:"[cdkTreeNodeDef]",inputs:["when: cdkTreeNodeDefWhen"]}]}],ctorParameters:function(){return[{type:d.TemplateRef}]}});class m{constructor(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new r.Subject,this._levels=new Map,this.viewChange=new r.BehaviorSubject({start:0,end:Number.MAX_VALUE})}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}ngOnInit(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl&&("undefined"==typeof ngDevMode||ngDevMode))throw v()}ngOnDestroy(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}ngAfterContentChecked(){const e=this._nodeDefs.filter((e=>!e.when));if(e.length>1&&("undefined"==typeof ngDevMode||ngDevMode))throw _();this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}_switchDataSource(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()}_observeRenderChanges(){let e;if(t.isDataSource(this._dataSource)?e=this._dataSource.connect(this):r.isObservable(this._dataSource)?e=this._dataSource:Array.isArray(this._dataSource)&&(e=r.of(this._dataSource)),e)this._dataSubscription=e.pipe(n.takeUntil(this._onDestroy)).subscribe((e=>this.renderNodeChanges(e)));else if("undefined"==typeof ngDevMode||ngDevMode)throw f()}renderNodeChanges(e,t=this._dataDiffer,r=this._nodeOutlet.viewContainer,n){const s=t.diff(e);s&&(s.forEachOperation(((t,s,i)=>{if(null==t.previousIndex)this.insertNode(e[i],i,r,n);else if(null==i)r.remove(s),this._levels.delete(t.item);else{const e=r.get(s);r.move(e,i)}})),this._changeDetectorRef.detectChanges())}_getNodeDef(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;const r=this._nodeDefs.find((r=>r.when&&r.when(t,e)))||this._defaultNodeDef;if(!r&&("undefined"==typeof ngDevMode||ngDevMode))throw y();return r}insertNode(e,t,r,n){const s=this._getNodeDef(e,t),i=new u(e);this.treeControl.getLevel?i.level=this.treeControl.getLevel(e):void 0!==n&&this._levels.has(n)?i.level=this._levels.get(n)+1:i.level=0,this._levels.set(e,i.level);(r||this._nodeOutlet.viewContainer).createEmbeddedView(s.template,i,t),k.mostRecentTreeNode&&(k.mostRecentTreeNode.data=e)}}m.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:m,deps:[{token:d.IterableDiffers},{token:d.ChangeDetectorRef}],target:d.ɵɵFactoryTarget.Component}),m.ɵcmp=d.ɵɵngDeclareComponent({minVersion:"14.0.0",version:"15.0.0",type:m,selector:"cdk-tree",inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},host:{attributes:{role:"tree"},classAttribute:"cdk-tree"},queries:[{propertyName:"_nodeDefs",predicate:g,descendants:!0}],viewQueries:[{propertyName:"_nodeOutlet",first:!0,predicate:p,descendants:!0,static:!0}],exportAs:["cdkTree"],ngImport:d,template:"<ng-container cdkTreeNodeOutlet></ng-container>",isInline:!0,dependencies:[{kind:"directive",type:p,selector:"[cdkTreeNodeOutlet]"}],changeDetection:d.ChangeDetectionStrategy.Default,encapsulation:d.ViewEncapsulation.None}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:m,decorators:[{type:s.Component,args:[{selector:"cdk-tree",exportAs:"cdkTree",template:"<ng-container cdkTreeNodeOutlet></ng-container>",host:{class:"cdk-tree",role:"tree"},encapsulation:s.ViewEncapsulation.None,changeDetection:s.ChangeDetectionStrategy.Default}]}],ctorParameters:function(){return[{type:d.IterableDiffers},{type:d.ChangeDetectorRef}]},propDecorators:{dataSource:[{type:s.Input}],treeControl:[{type:s.Input}],trackBy:[{type:s.Input}],_nodeOutlet:[{type:s.ViewChild,args:[p,{static:!0}]}],_nodeDefs:[{type:s.ContentChildren,args:[g,{descendants:!0}]}]}});class k{constructor(e,t){this._elementRef=e,this._tree=t,this._destroyed=new r.Subject,this._dataChanges=new r.Subject,k.mostRecentTreeNode=this,this.role="treeitem"}get role(){return"treeitem"}set role(e){this._elementRef.nativeElement.setAttribute("role",e)}get data(){return this._data}set data(e){e!==this._data&&(this._data=e,this._setRoleFromData(),this._dataChanges.next())}get isExpanded(){return this._tree.treeControl.isExpanded(this._data)}get level(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):this._parentNodeAriaLevel}ngOnInit(){this._parentNodeAriaLevel=function(e){let t=e.parentElement;for(;t&&!C(t);)t=t.parentElement;if(t)return t.classList.contains("cdk-nested-tree-node")?i.coerceNumberProperty(t.getAttribute("aria-level")):0;if("undefined"==typeof ngDevMode||ngDevMode)throw Error("Incorrect tree structure containing detached node.");return-1}(this._elementRef.nativeElement),this._elementRef.nativeElement.setAttribute("aria-level",`${this.level+1}`)}ngOnDestroy(){k.mostRecentTreeNode===this&&(k.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}focus(){this._elementRef.nativeElement.focus()}_setRoleFromData(){if(!this._tree.treeControl.isExpandable&&!this._tree.treeControl.getChildren&&("undefined"==typeof ngDevMode||ngDevMode))throw D();this.role="treeitem"}}function C(e){const t=e.classList;return!(!t?.contains("cdk-nested-tree-node")&&!t?.contains("cdk-tree"))}k.mostRecentTreeNode=null,k.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:k,deps:[{token:d.ElementRef},{token:m}],target:d.ɵɵFactoryTarget.Directive}),k.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:k,selector:"cdk-tree-node",inputs:{role:"role"},host:{properties:{"attr.aria-expanded":"isExpanded"},classAttribute:"cdk-tree-node"},exportAs:["cdkTreeNode"],ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:k,decorators:[{type:s.Directive,args:[{selector:"cdk-tree-node",exportAs:"cdkTreeNode",host:{class:"cdk-tree-node","[attr.aria-expanded]":"isExpanded"}}]}],ctorParameters:function(){return[{type:d.ElementRef},{type:m}]},propDecorators:{role:[{type:s.Input}]}});class N extends k{constructor(e,t,r){super(e,t),this._differs=r}ngAfterContentInit(){if(this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),!this._tree.treeControl.getChildren&&("undefined"==typeof ngDevMode||ngDevMode))throw D();const e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):r.isObservable(e)&&e.pipe(n.takeUntil(this._destroyed)).subscribe((e=>this.updateChildrenNodes(e))),this.nodeOutlet.changes.pipe(n.takeUntil(this._destroyed)).subscribe((()=>this.updateChildrenNodes()))}ngOnInit(){super.ngOnInit()}ngOnDestroy(){this._clear(),super.ngOnDestroy()}updateChildrenNodes(e){const t=this._getNodeOutlet();if(e&&(this._children=e),t&&this._children){const e=t.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,e,this._data)}else this._dataDiffer.diff([])}_clear(){const e=this._getNodeOutlet();e&&(e.viewContainer.clear(),this._dataDiffer.diff([]))}_getNodeOutlet(){const e=this.nodeOutlet;return e&&e.find((e=>!e._node||e._node===this))}}N.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:N,deps:[{token:d.ElementRef},{token:m},{token:d.IterableDiffers}],target:d.ɵɵFactoryTarget.Directive}),N.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:N,selector:"cdk-nested-tree-node",inputs:{role:"role",disabled:"disabled",tabIndex:"tabIndex"},host:{classAttribute:"cdk-nested-tree-node"},providers:[{provide:k,useExisting:N},{provide:h,useExisting:N}],queries:[{propertyName:"nodeOutlet",predicate:p,descendants:!0}],exportAs:["cdkNestedTreeNode"],usesInheritance:!0,ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:N,decorators:[{type:s.Directive,args:[{selector:"cdk-nested-tree-node",exportAs:"cdkNestedTreeNode",inputs:["role","disabled","tabIndex"],providers:[{provide:k,useExisting:N},{provide:h,useExisting:N}],host:{class:"cdk-nested-tree-node"}}]}],ctorParameters:function(){return[{type:d.ElementRef},{type:m},{type:d.IterableDiffers}]},propDecorators:{nodeOutlet:[{type:s.ContentChildren,args:[p,{descendants:!0}]}]}});const b=/([A-Za-z%]+)$/;class T{constructor(e,t,s,i){this._treeNode=e,this._tree=t,this._element=s,this._dir=i,this._destroyed=new r.Subject,this.indentUnits="px",this._indent=40,this._setPadding(),i&&i.change.pipe(n.takeUntil(this._destroyed)).subscribe((()=>this._setPadding(!0))),e._dataChanges.subscribe((()=>this._setPadding()))}get level(){return this._level}set level(e){this._setLevelInput(e)}get indent(){return this._indent}set indent(e){this._setIndentInput(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_paddingIndent(){const e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=null==this._level?e:this._level;return"number"==typeof t?`${t*this._indent}${this.indentUnits}`:null}_setPadding(e=!1){const t=this._paddingIndent();if(t!==this._currentPadding||e){const e=this._element.nativeElement,r=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",n="paddingLeft"===r?"paddingRight":"paddingLeft";e.style[r]=t||"",e.style[n]="",this._currentPadding=t}}_setLevelInput(e){this._level=i.coerceNumberProperty(e,null),this._setPadding()}_setIndentInput(e){let t=e,r="px";if("string"==typeof e){const n=e.split(b);t=n[0],r=n[1]||r}this.indentUnits=r,this._indent=i.coerceNumberProperty(t),this._setPadding()}}T.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:T,deps:[{token:k},{token:m},{token:d.ElementRef},{token:c.Directionality,optional:!0}],target:d.ɵɵFactoryTarget.Directive}),T.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:T,selector:"[cdkTreeNodePadding]",inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]},ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:T,decorators:[{type:s.Directive,args:[{selector:"[cdkTreeNodePadding]"}]}],ctorParameters:function(){return[{type:k},{type:m},{type:d.ElementRef},{type:c.Directionality,decorators:[{type:s.Optional}]}]},propDecorators:{level:[{type:s.Input,args:["cdkTreeNodePadding"]}],indent:[{type:s.Input,args:["cdkTreeNodePaddingIndent"]}]}});class x{constructor(e,t){this._tree=e,this._treeNode=t,this._recursive=!1}get recursive(){return this._recursive}set recursive(e){this._recursive=i.coerceBooleanProperty(e)}_toggle(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()}}x.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:x,deps:[{token:m},{token:k}],target:d.ɵɵFactoryTarget.Directive}),x.ɵdir=d.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:x,selector:"[cdkTreeNodeToggle]",inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]},host:{listeners:{click:"_toggle($event)"}},ngImport:d}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:x,decorators:[{type:s.Directive,args:[{selector:"[cdkTreeNodeToggle]",host:{"(click)":"_toggle($event)"}}]}],ctorParameters:function(){return[{type:m},{type:k}]},propDecorators:{recursive:[{type:s.Input,args:["cdkTreeNodeToggleRecursive"]}]}});const I=[N,g,T,x,m,k,p];class E{}E.ɵfac=d.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:E,deps:[],target:d.ɵɵFactoryTarget.NgModule}),E.ɵmod=d.ɵɵngDeclareNgModule({minVersion:"14.0.0",version:"15.0.0",ngImport:d,type:E,declarations:[N,g,T,x,m,k,p],exports:[N,g,T,x,m,k,p]}),E.ɵinj=d.ɵɵngDeclareInjector({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:E}),d.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:d,type:E,decorators:[{type:s.NgModule,args:[{exports:I,declarations:I}]}]}),e.BaseTreeControl=l,e.CDK_TREE_NODE_OUTLET_NODE=h,e.CdkNestedTreeNode=N,e.CdkTree=m,e.CdkTreeModule=E,e.CdkTreeNode=k,e.CdkTreeNodeDef=g,e.CdkTreeNodeOutlet=p,e.CdkTreeNodeOutletContext=u,e.CdkTreeNodePadding=T,e.CdkTreeNodeToggle=x,e.FlatTreeControl=class extends l{constructor(e,t,r){super(),this.getLevel=e,this.isExpandable=t,this.options=r,this.options&&(this.trackBy=this.options.trackBy)}getDescendants(e){const t=[];for(let r=this.dataNodes.indexOf(e)+1;r<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[r]);r++)t.push(this.dataNodes[r]);return t}expandAll(){this.expansionModel.select(...this.dataNodes.map((e=>this._trackByValue(e))))}},e.NestedTreeControl=class extends l{constructor(e,t){super(),this.getChildren=e,this.options=t,this.options&&(this.trackBy=this.options.trackBy)}expandAll(){this.expansionModel.clear();const e=this.dataNodes.reduce(((e,t)=>[...e,...this.getDescendants(t),t]),[]);this.expansionModel.select(...e.map((e=>this._trackByValue(e))))}getDescendants(e){const t=[];return this._getDescendants(t,e),t.splice(1)}_getDescendants(e,t){e.push(t);const s=this.getChildren(t);Array.isArray(s)?s.forEach((t=>this._getDescendants(e,t))):r.isObservable(s)&&s.pipe(n.take(1),n.filter(Boolean)).subscribe((t=>{for(const r of t)this._getDescendants(e,r)}))}},e.getTreeControlFunctionsMissingError=D,e.getTreeControlMissingError=v,e.getTreeMissingMatchingNodeDefError=y,e.getTreeMultipleDefaultNodeDefsError=_,e.getTreeNoValidDataSourceError=f}));
