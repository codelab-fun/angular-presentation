!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ngCdkPortal={},t.ngCore,t.ngCommon)}(this,(function(t,e,o){"use strict";function r(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(o){if("default"!==o){var r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(e,o,r.get?r:{enumerable:!0,get:function(){return t[o]}})}})),e.default=t,Object.freeze(e)}var n=r(e);function a(){throw Error("Host already has a portal attached")}class s{attach(t){return("undefined"==typeof ngDevMode||ngDevMode)&&(null==t&&function(){throw Error("Attempting to attach a portal to a null PortalOutlet")}(),t.hasAttached()&&a()),this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t?(this._attachedHost=null,t.detach()):("undefined"==typeof ngDevMode||ngDevMode)&&function(){throw Error("Attempting to detach a portal that is not attached to a host")}()}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class i extends s{constructor(t,e,o,r,n){super(),this.component=t,this.viewContainerRef=e,this.injector=o,this.componentFactoryResolver=r,this.projectableNodes=n}}class c extends s{constructor(t,e,o,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=o,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class l extends s{constructor(t){super(),this.element=t instanceof e.ElementRef?t.nativeElement:t}}class d{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return("undefined"==typeof ngDevMode||ngDevMode)&&(t||function(){throw Error("Must provide a portal to attach")}(),this.hasAttached()&&a(),this._isDisposed&&function(){throw Error("This PortalOutlet has already been disposed")}()),t instanceof i?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof c?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof l?(this._attachedPortal=t,this.attachDomPortal(t)):void(("undefined"==typeof ngDevMode||ngDevMode)&&function(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")}())}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class p extends d{constructor(t,e,o,r,n){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=o,this._defaultInjector=r,this.attachDomPortal=t=>{if(!this._document&&("undefined"==typeof ngDevMode||ngDevMode))throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode&&("undefined"==typeof ngDevMode||ngDevMode))throw Error("DOM portal content must be attached to a parent node.");const o=this._document.createComment("dom-portal");e.parentNode.insertBefore(o,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn((()=>{o.parentNode&&o.parentNode.replaceChild(e,o)}))},this._document=n}attachComponentPortal(t){const o=t.componentFactoryResolver||this._componentFactoryResolver;if(("undefined"==typeof ngDevMode||ngDevMode)&&!o)throw Error("Cannot attach component portal to outlet without a ComponentFactoryResolver.");const r=o.resolveComponentFactory(t.component);let n;if(t.viewContainerRef)n=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn((()=>n.destroy()));else{if(("undefined"==typeof ngDevMode||ngDevMode)&&!this._appRef)throw Error("Cannot attach component portal to outlet without an ApplicationRef.");n=r.create(t.injector||this._defaultInjector||e.Injector.NULL),this._appRef.attachView(n.hostView),this.setDisposeFn((()=>{this._appRef.viewCount>0&&this._appRef.detachView(n.hostView),n.destroy()}))}return this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,o=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return o.rootNodes.forEach((t=>this.outletElement.appendChild(t))),o.detectChanges(),this.setDisposeFn((()=>{let t=e.indexOf(o);-1!==t&&e.remove(t)})),this._attachedPortal=t,o}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}class h extends c{constructor(t,e){super(t,e)}}h.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:h,deps:[{token:n.TemplateRef},{token:n.ViewContainerRef}],target:n.ɵɵFactoryTarget.Directive}),h.ɵdir=n.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:h,selector:"[cdkPortal]",exportAs:["cdkPortal"],usesInheritance:!0,ngImport:n}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:h,decorators:[{type:e.Directive,args:[{selector:"[cdkPortal]",exportAs:"cdkPortal"}]}],ctorParameters:function(){return[{type:n.TemplateRef},{type:n.ViewContainerRef}]}});class u extends h{}u.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:u,deps:null,target:n.ɵɵFactoryTarget.Directive}),u.ɵdir=n.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:u,selector:"[cdk-portal], [portal]",providers:[{provide:h,useExisting:u}],exportAs:["cdkPortal"],usesInheritance:!0,ngImport:n}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:u,decorators:[{type:e.Directive,args:[{selector:"[cdk-portal], [portal]",exportAs:"cdkPortal",providers:[{provide:h,useExisting:u}]}]}]});class m extends d{constructor(t,o,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=o,this._isInitialized=!1,this.attached=new e.EventEmitter,this.attachDomPortal=t=>{if(!this._document&&("undefined"==typeof ngDevMode||ngDevMode))throw Error("Cannot attach DOM portal without _document constructor parameter");const e=t.element;if(!e.parentNode&&("undefined"==typeof ngDevMode||ngDevMode))throw Error("DOM portal content must be attached to a parent node.");const o=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(o,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn((()=>{o.parentNode&&o.parentNode.replaceChild(e,o)}))},this._document=r}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r=e.createComponent(o,e.length,t.injector||e.injector,t.projectableNodes||void 0);return e!==this._viewContainerRef&&this._getRootNode().appendChild(r.hostView.rootNodes[0]),super.setDisposeFn((()=>r.destroy())),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn((()=>this._viewContainerRef.clear())),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}m.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:m,deps:[{token:n.ComponentFactoryResolver},{token:n.ViewContainerRef},{token:o.DOCUMENT}],target:n.ɵɵFactoryTarget.Directive}),m.ɵdir=n.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:m,selector:"[cdkPortalOutlet]",inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],usesInheritance:!0,ngImport:n}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:m,decorators:[{type:e.Directive,args:[{selector:"[cdkPortalOutlet]",exportAs:"cdkPortalOutlet",inputs:["portal: cdkPortalOutlet"]}]}],ctorParameters:function(){return[{type:n.ComponentFactoryResolver},{type:n.ViewContainerRef},{type:void 0,decorators:[{type:e.Inject,args:[o.DOCUMENT]}]}]},propDecorators:{attached:[{type:e.Output}]}});class f extends m{}f.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:f,deps:null,target:n.ɵɵFactoryTarget.Directive}),f.ɵdir=n.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:f,selector:"[cdkPortalHost], [portalHost]",inputs:{portal:["cdkPortalHost","portal"]},providers:[{provide:m,useExisting:f}],exportAs:["cdkPortalHost"],usesInheritance:!0,ngImport:n}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:f,decorators:[{type:e.Directive,args:[{selector:"[cdkPortalHost], [portalHost]",exportAs:"cdkPortalHost",inputs:["portal: cdkPortalHost"],providers:[{provide:m,useExisting:f}]}]}]});class g{}g.ɵfac=n.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:g,deps:[],target:n.ɵɵFactoryTarget.NgModule}),g.ɵmod=n.ɵɵngDeclareNgModule({minVersion:"14.0.0",version:"15.0.0",ngImport:n,type:g,declarations:[h,m,u,f],exports:[h,m,u,f]}),g.ɵinj=n.ɵɵngDeclareInjector({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:g}),n.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:n,type:g,decorators:[{type:e.NgModule,args:[{exports:[h,m,u,f],declarations:[h,m,u,f]}]}]});t.BasePortalHost=class extends d{},t.BasePortalOutlet=d,t.CdkPortal=h,t.CdkPortalOutlet=m,t.ComponentPortal=i,t.DomPortal=l,t.DomPortalHost=class extends p{},t.DomPortalOutlet=p,t.Portal=s,t.PortalHostDirective=f,t.PortalInjector=class{constructor(t,e){this._parentInjector=t,this._customTokens=e}get(t,e){const o=this._customTokens.get(t);return void 0!==o?o:this._parentInjector.get(t,e)}},t.PortalModule=g,t.TemplatePortal=c,t.TemplatePortalDirective=u}));
