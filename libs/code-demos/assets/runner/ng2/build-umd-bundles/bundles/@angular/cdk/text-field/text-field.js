!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/platform"),require("@angular/core"),require("@angular/cdk/coercion"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/cdk/platform","@angular/core","@angular/cdk/coercion","rxjs","rxjs/operators","@angular/common"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ngCdkTextField={},e.ngCdkPlatform,e.ngCore,e.ngCdkCoercion,e.rxjs,e.rxjsOperators,e.ngCommon)}(this,(function(e,t,i,s,o,n,r){"use strict";function a(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var l=a(t),c=a(i);const h=t.normalizePassiveListenerOptions({passive:!0});class d{constructor(e,t){this._platform=e,this._ngZone=t,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return o.EMPTY;const t=s.coerceElement(e),i=this._monitoredElements.get(t);if(i)return i.subject;const n=new o.Subject,r="cdk-text-field-autofilled",a=e=>{"cdk-text-field-autofill-start"!==e.animationName||t.classList.contains(r)?"cdk-text-field-autofill-end"===e.animationName&&t.classList.contains(r)&&(t.classList.remove(r),this._ngZone.run((()=>n.next({target:e.target,isAutofilled:!1})))):(t.classList.add(r),this._ngZone.run((()=>n.next({target:e.target,isAutofilled:!0}))))};return this._ngZone.runOutsideAngular((()=>{t.addEventListener("animationstart",a,h),t.classList.add("cdk-text-field-autofill-monitored")})),this._monitoredElements.set(t,{subject:n,unlisten:()=>{t.removeEventListener("animationstart",a,h)}}),n}stopMonitoring(e){const t=s.coerceElement(e),i=this._monitoredElements.get(t);i&&(i.unlisten(),i.subject.complete(),t.classList.remove("cdk-text-field-autofill-monitored"),t.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(t))}ngOnDestroy(){this._monitoredElements.forEach(((e,t)=>this.stopMonitoring(t)))}}d.ɵfac=c.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:d,deps:[{token:l.Platform},{token:c.NgZone}],target:c.ɵɵFactoryTarget.Injectable}),d.ɵprov=c.ɵɵngDeclareInjectable({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:d,providedIn:"root"}),c.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:d,decorators:[{type:i.Injectable,args:[{providedIn:"root"}]}],ctorParameters:function(){return[{type:l.Platform},{type:c.NgZone}]}});class u{constructor(e,t){this._elementRef=e,this._autofillMonitor=t,this.cdkAutofill=new i.EventEmitter}ngOnInit(){this._autofillMonitor.monitor(this._elementRef).subscribe((e=>this.cdkAutofill.emit(e)))}ngOnDestroy(){this._autofillMonitor.stopMonitoring(this._elementRef)}}u.ɵfac=c.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:u,deps:[{token:c.ElementRef},{token:d}],target:c.ɵɵFactoryTarget.Directive}),u.ɵdir=c.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:u,selector:"[cdkAutofill]",outputs:{cdkAutofill:"cdkAutofill"},ngImport:c}),c.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:u,decorators:[{type:i.Directive,args:[{selector:"[cdkAutofill]"}]}],ctorParameters:function(){return[{type:c.ElementRef},{type:d}]},propDecorators:{cdkAutofill:[{type:i.Output}]}});class m{constructor(e,t,i,s){this._elementRef=e,this._platform=t,this._ngZone=i,this._destroyed=new o.Subject,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=e=>{this._hasFocus="focus"===e.type},this._document=s,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(e){this._minRows=s.coerceNumberProperty(e),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(e){this._maxRows=s.coerceNumberProperty(e),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(e){e=s.coerceBooleanProperty(e),this._enabled!==e&&((this._enabled=e)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(e){this._cachedPlaceholderHeight=void 0,e?this._textareaElement.setAttribute("placeholder",e):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const e=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.minHeight=e)}_setMaxHeight(){const e=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;e&&(this._textareaElement.style.maxHeight=e)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular((()=>{const e=this._getWindow();o.fromEvent(e,"resize").pipe(n.auditTime(16),n.takeUntil(this._destroyed)).subscribe((()=>this.resizeToFitContent(!0))),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)})),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let e=this._textareaElement.cloneNode(!1);e.rows=1,e.style.position="absolute",e.style.visibility="hidden",e.style.border="none",e.style.padding="0",e.style.height="",e.style.minHeight="",e.style.maxHeight="",e.style.overflow="hidden",this._textareaElement.parentNode.appendChild(e),this._cachedLineHeight=e.clientHeight,e.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const e=this._textareaElement,t=e.style.marginBottom||"",i=this._platform.FIREFOX,s=i&&this._hasFocus,o=i?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";s&&(e.style.marginBottom=`${e.clientHeight}px`),e.classList.add(o);const n=e.scrollHeight-4;return e.classList.remove(o),s&&(e.style.marginBottom=t),n}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const e=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=e}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(e=!1){if(!this._enabled)return;if(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight)return;const t=this._elementRef.nativeElement,i=t.value;if(!e&&this._minRows===this._previousMinRows&&i===this._previousValue)return;const s=this._measureScrollHeight(),o=Math.max(s,this._cachedPlaceholderHeight||0);t.style.height=`${o}px`,this._ngZone.runOutsideAngular((()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame((()=>this._scrollToCaretPosition(t))):setTimeout((()=>this._scrollToCaretPosition(t)))})),this._previousValue=i,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(e){const{selectionStart:t,selectionEnd:i}=e;!this._destroyed.isStopped&&this._hasFocus&&e.setSelectionRange(t,i)}}m.ɵfac=c.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:m,deps:[{token:c.ElementRef},{token:l.Platform},{token:c.NgZone},{token:r.DOCUMENT,optional:!0}],target:c.ɵɵFactoryTarget.Directive}),m.ɵdir=c.ɵɵngDeclareDirective({minVersion:"14.0.0",version:"15.0.0",type:m,selector:"textarea[cdkTextareaAutosize]",inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},host:{attributes:{rows:"1"},listeners:{input:"_noopInputHandler()"},classAttribute:"cdk-textarea-autosize"},exportAs:["cdkTextareaAutosize"],ngImport:c}),c.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:m,decorators:[{type:i.Directive,args:[{selector:"textarea[cdkTextareaAutosize]",exportAs:"cdkTextareaAutosize",host:{class:"cdk-textarea-autosize",rows:"1","(input)":"_noopInputHandler()"}}]}],ctorParameters:function(){return[{type:c.ElementRef},{type:l.Platform},{type:c.NgZone},{type:void 0,decorators:[{type:i.Optional},{type:i.Inject,args:[r.DOCUMENT]}]}]},propDecorators:{minRows:[{type:i.Input,args:["cdkAutosizeMinRows"]}],maxRows:[{type:i.Input,args:["cdkAutosizeMaxRows"]}],enabled:[{type:i.Input,args:["cdkTextareaAutosize"]}],placeholder:[{type:i.Input}]}});class g{}g.ɵfac=c.ɵɵngDeclareFactory({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:g,deps:[],target:c.ɵɵFactoryTarget.NgModule}),g.ɵmod=c.ɵɵngDeclareNgModule({minVersion:"14.0.0",version:"15.0.0",ngImport:c,type:g,declarations:[u,m],exports:[u,m]}),g.ɵinj=c.ɵɵngDeclareInjector({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:g}),c.ɵɵngDeclareClassMetadata({minVersion:"12.0.0",version:"15.0.0",ngImport:c,type:g,decorators:[{type:i.NgModule,args:[{declarations:[u,m],exports:[u,m]}]}]}),e.AutofillMonitor=d,e.CdkAutofill=u,e.CdkTextareaAutosize=m,e.TextFieldModule=g}));
